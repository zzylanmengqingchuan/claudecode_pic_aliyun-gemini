# 🕊️ Dove VPN - 最终解决方案

## ✅ 推荐方案：自动检测（最简单）

### 步骤 1：确保 Dove VPN 已连接
1. 打开 Dove VPN
2. 连接到美国节点
3. 确认已连接（图标应该显示已连接状态）

### 步骤 2：运行自动检测脚本
**双击运行 `auto-detect-proxy.bat`**

这个脚本会：
1. 自动测试常见端口（10808、1080、10809 等）
2. 找到 Dove VPN 的代理端口
3. 自动配置并启动服务器

### 步骤 3：测试功能
1. 浏览器访问 `http://localhost:3000`
2. 上传照片
3. 选择风格
4. 生成头像

---

## 📋 备用方案：手动配置

如果自动检测失败，请：

### 方法 A：查看 Dove VPN 设置
1. 打开 Dove VPN
2. 点击"设置"或"偏好设置"
3. 查找"端口"或"代理"相关设置
4. 记下端口号（例如：10808）

### 方法 B：修改启动脚本
1. 用记事本打开 `start-with-proxy.bat`
2. 修改这一行：
   ```batch
   set PROXY_PORT=你找到的端口号
   ```
3. 保存
4. 双击运行 `start-with-proxy.bat`

---

## 🔍 常见 Dove VPN 端口

根据不同版本，Dove VPN 可能使用：
- **10808** ← 最常见
- **1080**
- **10809**
- **7890**

---

## ✅ 成功标志

### 使用 auto-detect-proxy.bat
你会看到：
```
[测试] 端口 10808...
✓ 找到可用端口: 10808

✓ 检测成功！
Dove VPN 代理端口: 10808
```

### 服务器启动后
```
专业头像生成器服务已启动
服务地址: http://localhost:3000
```

### 测试图片生成时
服务器日志显示：
```
API 响应状态码: 200  ← 成功！
成功提取生成的图片
图片生成成功
```

而不是 `ETIMEDOUT` 错误。

---

## ❌ 如果仍然失败

### 检查清单：
1. [ ] Dove VPN 已启动并连接
2. [ ] 能在浏览器访问 google.com
3. [ ] Dove VPN 设置中启用了本地代理
4. [ ] 使用了正确的启动脚本（auto-detect 或 start-with-proxy）

### 提供信息：
如果还是不行，告诉我：
1. Dove VPN 的版本号
2. 自动检测脚本的输出结果
3. Dove VPN 设置界面的截图

---

## 🎯 现在开始

**立即运行：双击 `auto-detect-proxy.bat`**

脚本会自动找到 Dove VPN 的端口并启动服务器！
