# 专业头像生成器 Web App 规格说明书

## 项目概述

一个基于 Web 的专业头像生成应用，用户可以上传个人照片，选择预设风格，通过 AI 技术生成专业的头像图片。

## 核心功能需求

### 1. 照片上传功能
- 支持用户从本地设备上传照片
- 支持的图片格式：JPG, PNG, WEBP
- 图片大小限制：最大 10MB
- 上传前进行客户端验证（格式、大小）
- 显示上传进度指示器
- 支持拖拽上传和点击选择文件两种方式
- 上传后显示预览缩略图

### 2. 风格选择功能
提供三种预设风格供用户选择：

**风格 1：商务正式**
- 适用场景：LinkedIn、求职简历、企业官网
- 风格特点：正式、专业、背景简洁

**风格 2：创意活力**
- 适用场景：社交媒体、个人品牌、创意行业
- 风格特点：活泼、有个性、色彩丰富

**风格 3：艺术写真**
- 适用场景：艺术家简介、个人作品集
- 风格特点：艺术化处理、质感强、氛围感

### 3. 头像生成功能
- 用户确认上传照片和选择风格后，点击"生成头像"按钮
- 显示生成进度（加载动画/进度条）
- 生成失败时显示友好的错误提示
- 支持重新生成

### 4. 结果展示功能
- 原图和生成后的图片并排展示
- 左侧：原始上传图片
- 右侧：AI 生成的专业头像
- 支持点击查看大图
- 提供下载按钮，下载生成的头像
- 下载文件命名格式：`professional-avatar-[timestamp].png`
- 提供"重新生成"和"返回首页"操作按钮

### 5. 用户体验要求
- 响应式设计，支持桌面和移动端
- 界面简洁直观，操作流程清晰
- 提供明确的操作指引和状态反馈
- 加载状态有友好的动画效果
- 错误提示清晰易懂

## 技术规格

### 前端技术栈
- HTML5
- CSS3 / TailwindCSS（推荐）
- JavaScript / TypeScript
- React / Vue / Vanilla JS（根据团队偏好选择）

### 后端技术栈
- Node.js / Python（根据团队偏好选择）
- REST API 架构
- 图片处理库（Sharp / Pillow）

### AI 集成
- Google Nano Banana API（里程碑 2）
- 图片格式转换和预处理

### 存储
- 临时文件存储（用于上传和处理中的图片）
- 可选：云存储服务（AWS S3 / Google Cloud Storage）

## 页面结构

### 首页（上传页）
- 应用标题和简介
- 上传区域（拖拽或点击）
- 风格选择卡片（三选一）
- "生成头像"按钮（上传完成后激活）

### 生成中页面
- 加载动画
- 生成进度提示文案
- 预估等待时间

### 结果页
- 左右分栏布局
  - 左侧：原图展示区
  - 右侧：生成图展示区
- 操作按钮区
  - 下载按钮
  - 重新生成按钮
  - 返回首页按钮

## 数据流程

1. 用户上传照片 → 客户端验证 → 显示预览
2. 用户选择风格 → 更新 UI 状态
3. 点击生成 → 调用后端 API → 返回生成结果
4. 展示结果 → 支持下载/重新操作

## 错误处理

- 文件格式不支持
- 文件大小超限
- 网络请求失败
- API 调用失败
- 生成超时
- 服务器错误

每种错误都应有明确的提示信息和建议操作。

## 性能要求

- 页面首次加载时间 < 2s
- 图片上传响应时间 < 1s（取决于网络）
- AI 生成时间 < 30s（取决于 API 性能）
- 支持图片懒加载和压缩

---

## 里程碑规划

## 里程碑 1：UI 实现与交互逻辑

**目标：** 完成所有前端界面和交互逻辑，使用 Mock 数据模拟 AI 生成效果

### 交付物
1. **首页 UI**
   - 完整的上传界面
   - 三种风格选择卡片设计
   - 响应式布局实现
   - 拖拽和点击上传功能

2. **交互逻辑**
   - 文件上传验证（格式、大小）
   - 图片预览功能
   - 风格选择状态管理
   - 表单验证和错误提示

3. **生成中页面**
   - 加载动画设计
   - 进度提示文案
   - Mock API 调用（延迟 2-3 秒）

4. **结果展示页**
   - 原图和生成图并排展示布局
   - Mock 生成图片（使用预设的示例图片）
   - 下载功能实现（下载 Mock 图片）
   - 重新生成和返回首页按钮

5. **全局功能**
   - 响应式设计（桌面/平板/手机）
   - 页面路由/状态管理
   - 统一的 UI 组件库
   - 错误提示组件

### 验收标准
- [ ] 所有页面 UI 完整实现
- [ ] 上传、选择、生成流程完整可用
- [ ] 使用 Mock 数据可以完整走通整个流程
- [ ] 移动端和桌面端显示正常
- [ ] 所有交互动画流畅
- [ ] 错误提示清晰友好

### 技术重点
- 组件化开发
- 状态管理
- 文件处理 API
- CSS 动画和过渡效果

---

## 里程碑 2：Google Nano Banana AI 集成

**目标：** 接入真实的 AI 服务，实现专业头像生成功能

### 交付物
1. **后端 API 开发**
   - 图片上传接口
   - 图片处理和预处理逻辑
   - Google Nano Banana API 集成
   - 生成结果返回接口

2. **AI 服务集成**
   - Google Nano Banana API 账号申请和配置
   - API 密钥管理（环境变量）
   - 三种风格的 Prompt 设计和调优
   - 图片格式转换和适配

3. **前后端联调**
   - 替换 Mock API 为真实 API
   - 请求和响应数据结构对接
   - 错误处理和重试逻辑
   - 超时处理

4. **图片处理优化**
   - 上传图片压缩和预处理
   - 生成图片质量优化
   - 响应速度优化
   - 临时文件清理机制

5. **安全和性能**
   - API 密钥安全管理
   - 请求频率限制
   - 文件大小和类型二次验证
   - 错误日志记录

### 验收标准
- [ ] Google Nano Banana API 成功接入
- [ ] 三种风格都能正确生成对应风格的头像
- [ ] 生成成功率 > 95%
- [ ] 平均生成时间 < 30s
- [ ] 错误情况有完善的处理和提示
- [ ] API 密钥等敏感信息安全存储
- [ ] 所有功能在生产环境正常运行

### 技术重点
- API 集成和调用
- 异步处理和队列管理
- 图片格式转换
- 错误处理和重试机制
- 环境变量和配置管理

### 注意事项
- Google Nano Banana API 的调用限制和配额
- 图片质量和风格的 Prompt 调优
- 成本控制（API 调用费用）
- 备份方案（API 不可用时的降级处理）

---

## 后续优化方向（可选）

- 支持更多风格选择
- 批量生成功能
- 用户历史记录
- 社交分享功能
- 高级参数调整（亮度、对比度等）
- 用户反馈和评分系统

---

## 附录

### API 接口设计（草案）

**上传并生成头像**
```
POST /api/generate-avatar
Content-Type: multipart/form-data

Request:
- image: File
- style: "business" | "creative" | "artistic"

Response:
{
  "success": true,
  "data": {
    "original_url": "string",
    "generated_url": "string",
    "style": "string"
  }
}
```

### 风格 Prompt 参考（需根据 API 调优）

- **商务正式：** "professional business portrait, clean background, formal attire, professional lighting, high quality, corporate headshot"
- **创意活力：** "creative portrait, vibrant colors, dynamic composition, artistic lighting, modern style, energetic mood"
- **艺术写真：** "artistic portrait, dramatic lighting, artistic style, cinematic mood, fine art photography, textured background"
